<!DOCTYPE html> <html lang=" en "><head> <meta charset="utf-8" /> <title> Helge J. Zöllner, PhD - </title> <meta http-equip="X-UA-Compatible" content="IE=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1" /> <meta name="keywords" content="Helge J. Zöllner, PhD, jekyll, update, Osprey, SpecVis,"/> <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" /> <meta content="" property="fb:app_id" /> <meta content="Helge J. Zöllner, PhD" property="og:site_name" /> <meta content="Helge J. Zöllner, PhD" property="og:title" /> <meta content="website" property="og:type" /> <meta content="MRS/MRI researcher, open-source software developer, Osprey enthusiast." property="og:description" /> <meta content="/assets/bower_components/ghosthunter/" property="og:url" /> <!-- Twitter Cards --> <meta name="twitter:card" content="summary" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:title" content="Helge J. Zöllner, PhD" /> <meta name="twitter:url" content="/assets/bower_components/ghosthunter/" /> <meta name="twitter:description" content="MRS/MRI researcher, open-source software developer, Osprey enthusiast." /> <link rel="stylesheet" href="/assets/css/main.css" /> <!-- <link rel="stylesheet" href="/assets/css/custom-style.css" /> --> <link rel="stylesheet" href="/assets/bower_components/lightgallery/dist/css/lightgallery.min.css" /> <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.css" /> <link rel="stylesheet" href="/assets/bower_components/bootstrap/dist/css/bootstrap.min.css" /> <link rel="stylesheet" href="/assets/bower_components/font-awesome/web-fonts-with-css/css/fontawesome-all.min.css" /> <link rel="stylesheet" href="/assets/bower_components/icono/dist/icono.min.css" /> <!-- Fonts--> <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet" /> <!-- Favicon --> <link rel="icon" href="/assets/img/favicon.ico" type="image/gif" sizes="16x16" /> <script> var base_url = '' ; </script> <!-- Jquery --> <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh" crossorigin="anonymous" ></script> <!-- <script src="/assets/bower_components/jquery/dist/jquery.min.js"></script> --> <script src="/assets/bower_components/jquery.easing/jquery.easing.min.js"></script> <script src="/assets/bower_components/bootstrap/dist/js/bootstrap.bundle.min.js"></script> <script src="/assets/bower_components/jquery-mousewheel/jquery.mousewheel.min.js"></script> <script src="/assets/bower_components/ghosthunter/dist/jquery.ghostHunter.min.js"></script> <script src="/assets/bower_components/lightgallery/dist/js/lightgallery-all.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/picturefill/3.0.2/picturefill.min.js"></script> <script src="/assets/bower_components/imagesloaded/imagesloaded.pkgd.min.js"></script> <script src="/assets/bower_components/nanobar/nanobar.min.js"></script> <script src="/assets/bower_components/typewrite/dist/typewrite.min.js"></script> <script src="/assets/js/search.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script> <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script> <!-- for Mathjax support --> <!-- Github Button --> <script async defer src="https://buttons.github.io/buttons.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous" ></script> <!-- (you can remove the below scripts but do buy me a coffee to show some support :) --> <!-- Maker widget --> <script> (function(d, h, m) { var js, fjs = d.getElementsByTagName(h)[0]; if (d.getElementById(m)) { return; } js = d.createElement(h); js.id = m; js.onload = function() { window.makerWidgetComInit({ position: "left", widget: "ofeeof264otl2l5g-zspk40eq2gaomj2n-higi2qphmveubksi" }); }; js.src = "https://makerwidget.com/js/embed.js"; fjs.parentNode.insertBefore(js, fjs); })(document, "script", "dhm"); </script> <!-- buy me a coffeee --> <script data-name="BMC-Widget" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="sujaykundu" data-description="Support me on Buy me a coffee!" data-message="" data-color="#FF813F" data-position="right" data-x_margin="10" data-y_margin="10" ></script> <!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--> <!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]--> <!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]--> <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> </head> <body> <nav class="navbar navbar-expand-lg fixed-top navbar-dark" id="topNav"> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" > <span class="icono-hamburger" id="navbar-hamburger"> </span> </button> <a class="navbar-brand" href="/">Helge J. Zöllner, PhD</a> <div class="collapse navbar-collapse" id="navbarNav"> <ul class="navbar-nav"> </ul> </div> <ul class="nav justify-content-end"> <li class="nav-item"> <a class="nav-link toggle-search-button" href="#search"> <i class="fa fa-search search-icon" aria-hidden="true"></i> </a> </li> <li class="nav-item" style="margin-top:5px; padding-right:20px;" > <a class="header__checkout snipcart-checkout"> <svg width="31" height="27" viewBox="0 0 31 27" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M1.10512 0.368718C0.560256 0.368718 0.118164 0.812066 0.118164 1.35848C0.118164 1.9049 0.560256 2.34824 1.10512 2.34824H4.90887L8.30138 18.4009C8.43503 19.0053 8.83085 19.5079 9.32946 19.5041H25.7788C26.3005 19.5118 26.7799 19.0375 26.7799 18.5143C26.7799 17.9911 26.3006 17.5168 25.7788 17.5245H10.1315L9.71003 15.545H27.095C27.5371 15.5412 27.9547 15.2048 28.0511 14.7718L30.354 4.87412C30.4825 4.29933 29.9852 3.67172 29.3979 3.66786H7.21171L6.6771 1.15221C6.58329 0.71276 6.15921 0.368652 5.7107 0.368652L1.10512 0.368718ZM7.623 5.64746H12.7634L13.2569 8.61674H8.25005L7.623 5.64746ZM14.7785 5.64746H20.9881L20.4946 8.61674H15.2719L14.7785 5.64746ZM23.0031 5.64746H28.1537L27.4649 8.61674H22.5097L23.0031 5.64746ZM8.67181 10.5963H13.5862L14.0797 13.5656H9.29919L8.67181 10.5963ZM15.6009 10.5963H20.1656L19.6721 13.5656H16.0944L15.6009 10.5963ZM22.1807 10.5963H27.0023L26.3135 13.5656H21.6872L22.1807 10.5963ZM12.6197 20.164C10.8141 20.164 9.32979 21.6525 9.32979 23.4632C9.32979 25.2739 10.8141 26.7624 12.6197 26.7624C14.4252 26.7624 15.9095 25.2739 15.9095 23.4632C15.9095 21.6525 14.4252 20.164 12.6197 20.164ZM22.4892 20.164C20.6837 20.164 19.1994 21.6525 19.1994 23.4632C19.1994 25.2739 20.6837 26.7624 22.4892 26.7624C24.2948 26.7624 25.7791 25.2739 25.7791 23.4632C25.7791 21.6525 24.2948 20.164 22.4892 20.164ZM12.6197 22.1435C13.3586 22.1435 13.9356 22.7222 13.9356 23.4632C13.9356 24.2042 13.3586 24.7829 12.6197 24.7829C11.8807 24.7829 11.3037 24.2042 11.3037 23.4632C11.3037 22.7222 11.8807 22.1435 12.6197 22.1435ZM22.4892 22.1435C23.2282 22.1435 23.8052 22.7222 23.8052 23.4632C23.8052 24.2042 23.2282 24.7829 22.4892 24.7829C21.7503 24.7829 21.1733 24.2042 21.1733 23.4632C21.1733 22.7222 21.7503 22.1435 22.4892 22.1435Z" fill="#ff7901" class="header__checkout-fill"></path> </svg> <span class="snipcart-items-count"></span> <!-- <span class="snipcart-total-price"></span> --> </a> </li> <li class="nav-item"> <input class="nav-link switch" id="theme-toggle" onclick="modeSwitcher() " type="checkbox" name="checkbox" /> </li> </ul> </nav> <!-- Search Form --> <div class="search-form-container"> <form class="search-form"> <fieldset class="search-form__fieldset"> <div class="row"> <div class="col-lg-8 offset-md-2"> <input class="search-form__field" placeholder="Type to Search..." autofocus> <input class="search-form__submit" type="submit" value="search"> </div> </div> </fieldset> </form> <div class="row"> <div class="col-lg-8 offset-md-2 search-results"> <div class="card search-results"></div> </div> </div> <div class="close-search-button search-form-container__close"> <i class="fa fa-times icon"></i> </div> </div><div class="container-fluid"> <div class="card"> <div class="col-md-8 offset-md-2 offset-md-right"> <p><img src="https://img.shields.io/badge/Version-0.6.0-blue.svg" alt="Version" /> <img src="https://img.shields.io/badge/Min%20Ghost%20v.-%3E%3D%202.10-red.svg" alt="MinGhostVersion" /></p> <h1 id="ghosthunter">ghostHunter</h1> <p><strong>Original developer:</strong> <a href="mailto:jamal@i11u.me">jamal@i11u.me</a></p> <p>GhostHunter makes it easy to add search capability to any Ghost theme, using the <a href="https://api.ghost.org/v1.14.0/docs">Ghost API</a> and the <a href="https://lunrjs.com">lunr.js</a> search engine. Indexing and search are done client-side (in the browser). This has several advantages:</p> <ul> <li>Searches are private to the user, and are not exposed to third parties.</li> <li>Installation and maintenance of powerful-but-daunting standalone search engines (such as <a href="http://lucene.apache.org/solr/">Solr</a> or <a href="https://www.elastic.co/">ElasticSearch</a>) is not required.</li> <li>Instant search (“search-as-you-type” or “typeahead”) is simple to configure.</li> </ul> <hr /> <h2 id="contents">Contents</h2> <ul> <li><a href="#ghosthunter">ghostHunter</a> <ul> <li><a href="#contents">Contents</a></li> <li><a href="#upgrade-notes">Upgrade notes</a></li> <li><a href="#basic-setup">Basic setup</a></li> <li><a href="#advanced-usage">Advanced usage</a> <ul> <li><a href="#production-installation">Production installation</a></li> <li><a href="#ghosthunter-options">GhostHunter options</a></li> <li><a href="#multiple-search-fields">Multiple search fields</a></li> <li><a href="#clearing-search-results">Clearing search results</a></li> <li><a href="#indexing-and-caching-how-it-works">Indexing and caching: how it works</a></li> <li><a href="#development-rebuilding-ghosthunter">Development: rebuilding ghostHunter</a></li> </ul> </li> </ul> </li> <li><a href="#footnotes">Footnotes</a></li> </ul> <hr /> <h2 id="upgrade-notes">Upgrade notes</h2> <h3 id="ghosthunter-v060">GhostHunter v0.6.0</h3> <ul> <li>Implements @JiapengLi “dirty fix” to support the new Ghost v2 Content API.</li> <li>Removes spurious production console.log message.</li> <li>Removes <code class="language-plaintext highlighter-rouge">includepages</code> option.</li> </ul> <p>To use this version of ghostHunter, you’ll need to create a Custom Integration and inject its Content API key into your blog header. In your Ghost Settings:</p> <ul> <li>Go to <strong>Integrations</strong></li> <li>Choose <strong>Add custom integration</strong>, name it <code class="language-plaintext highlighter-rouge">ghostHunter</code> and choose <strong>Create</strong>. Copy the generated Content API Key.</li> <li>Go to <strong>Code injection</strong></li> <li>Add this to <strong>Blog Header</strong>:<pre><code class="language-txt">&lt;script&gt;
var ghosthunter_key = 'PASTE_THE_GENERATED_KEY_HERE';
//optional: set your custom ghost_root url, default is `"/ghost/api/v2"`
var ghost_root_url = "/ghost/api/v2"
&lt;/script&gt;
</code></pre></li> </ul> <h3 id="ghosthunter-v051">GhostHunter v0.5.1</h3> <p>Breaking change: added a new parameter <code class="language-plaintext highlighter-rouge">includebodysearch</code>, default <code class="language-plaintext highlighter-rouge">false</code>. Leaving it <code class="language-plaintext highlighter-rouge">false</code> completely deactivates searching within post body. Change done for performance reasons for Ghost Pro members.</p> <h3 id="ghosthunter-v04x--v050">GhostHunter v0.4.x → v0.5.0</h3> <p>The local <code class="language-plaintext highlighter-rouge">lunr.js</code> index used by ghostHunter is quick. That makes it well suited to search-as-you-type (SAYT), which can be enabled simply by setting the <code class="language-plaintext highlighter-rouge">onKeyUp</code> option to <code class="language-plaintext highlighter-rouge">true</code>. Although fast and convenient, the rapid clearing-and-rewriting of search results in SAYT mode can be distracting to the user.</p> <p>From version 0.5.0, ghostHunter uses a <a href="https://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein edit distance</a> algorithm to determine the specific steps needed to transform each list of search results into the next. This produces screen updates that are easy on the eye, and even pleasant to watch.</p> <p>To support this behavior, ghostHunter imposes some new requirements on the <code class="language-plaintext highlighter-rouge">result_template</code>. If you use this option in your theme, you edit the template to satisfy the following requirements before upgrading:</p> <ul> <li>The template <em>must</em> be wrapped in a single outer node (i.e. <code class="language-plaintext highlighter-rouge">&lt;span&gt;</code> or <code class="language-plaintext highlighter-rouge">div</code>);</li> <li>The outer node <em>must</em> have a unique <code class="language-plaintext highlighter-rouge">id</code> attribute. You can set this using by giving giving the ```` value used for indexing a string prefix (see the default template for an example).</li> <li>The outer node <em>must</em> be assigned a class <code class="language-plaintext highlighter-rouge">gh-search-item</code>.</li> </ul> <p>That’s it. With those changes, your theme should be ready for ghostHunter 0.5.0.</p> <h2 id="basic-setup">Basic setup</h2> <p>In your theme directory, navigate to the <code class="language-plaintext highlighter-rouge">assets</code> subdirectory, <a name="r1" href="#f1">[1]</a> and clone this repository there: <a name="r2" href="#f2">[2]</a></p><pre><code class="language-txt">  cd assets
  git clone https://github.com/jamalneufeld/ghostHunter.git --recursive
</code></pre><p>After cloning, the ghostHunter module will be located at <code class="language-plaintext highlighter-rouge">assets/ghostHunter/dist/jquery.ghosthunter.js</code>. <a name="r3" href="#f3">[3]</a> This is a human-readable “raw” copy of the module, and can be loaded directly in your theme templates for testing. (It will run just fine, but it contains a lot of whitespace and comments, and should be “minified” for production use [see below]).</p> <p>To test the module in your template, add the following line, after JQuery is loaded. Typically this will be near the bottom of a file <code class="language-plaintext highlighter-rouge">default.hbs</code>, in the top folder of the theme directory.</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">""</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div> <p>You will need to add a search box to your pages. The specific <code class="language-plaintext highlighter-rouge">.hbs</code> template and location will vary depending on the style and on your design choices, but the HTML will need an <code class="language-plaintext highlighter-rouge">&lt;input&gt;</code> field and a submit button inside a <code class="language-plaintext highlighter-rouge">&lt;form&gt;</code> element. A block like this should do the trick:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"search-field"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">value=</span><span class="s">"search"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div></div> <p>You will also need to mark an area in your pages where the search results should show up:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"results"</span><span class="nt">&gt;&lt;/section&gt;</span>
</code></pre></div></div> <p>Wake up ghostHunter with a block of JQuery code. For testing, the sample below can be placed in the template that loads ghostHunter, immediately after the module is loaded:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;script&gt;</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">#search-field</span><span class="dl">"</span><span class="p">).</span><span class="nx">ghostHunter</span><span class="p">({</span>
      <span class="na">results</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#results</span><span class="dl">"</span>
    <span class="p">});</span>
  <span class="nt">&lt;/script&gt;</span>
</code></pre></div></div> <p>Do the necessaries to <a href="https://themes.ghost.org/v1.17.0/docs/about">load the theme into Ghost</a>, and see if it works. :sweat_smile:</p> <h2 id="advanced-usage">Advanced usage</h2> <h3 id="production-installation">Production installation</h3> <p>To reduce load times and network traffic, the JavaScript of a site is typically “minified,” bundling all code into a single file with reduced whitespace and other optimizations. The <code class="language-plaintext highlighter-rouge">jquery.ghosthunter.js</code> module should be bundled in this way for the production version of your site. The most common tool for this purpose in Web development is either Grunt or Gulp. A full explanation of their use is beyond the scope of this guide, but here are some links for reference:</p> <ul> <li>The <a href="https://gulpjs.com/">Gulp Project</a> website.</li> <li>The <a href="https://gruntjs.com/">Grunt Project</a> website.</li> </ul> <p>GhostHunter is built using Grunt. Instructions on installing Grunt in order to tweak or extend the code of the ghostHunter module are given in a separate section below.</p> <h3 id="ghosthunter-options">GhostHunter options</h3> <p>The behavior of ghostHunter can be controlled at two levels. For deep changes, <a name="r4" href="#f4">[4]</a> see the section <a href="#development-rebuilding-ghosthunter">Development: rebuilding ghostHunter</a> below.</p> <p>For most purposes, ghostHunter offers a set of simple options can be set when the plugin is invoked: as an example, the last code sample in the previous section sets the <code class="language-plaintext highlighter-rouge">results</code> option.</p> <p>:arrow_right: <strong>results</strong></p> <blockquote> <p>Should be set to the JQuery ID of the DOM object into which search results should be inserted. This value is required.</p> <p>Default value is <code class="language-plaintext highlighter-rouge">undefined</code>.</p> </blockquote> <p>:arrow_right: <strong>onKeyUp</strong></p> <blockquote> <p>When set <code class="language-plaintext highlighter-rouge">true</code>, search results are returned after each keystroke, for instant search-as-you-type results.</p> <p>Default value is <code class="language-plaintext highlighter-rouge">false</code></p> </blockquote> <p>:arrow_right: <strong>result_template</strong></p> <blockquote> <p>A simple Handlebars template used to render individual items in the search result. The templates recognize variable substitution only; helpers and conditional insertion constructs are ignored, and will be rendered verbatim.</p> <p>From ghostHunter v0.5.0, the <code class="language-plaintext highlighter-rouge">result_template</code> <em>must</em> be assigned a unique<code class="language-plaintext highlighter-rouge">id</code>, and <em>must</em> be assigned a class <code class="language-plaintext highlighter-rouge">gh-search-item</code>. Without these attributes, screen updates will not work correctly.</p> <p>Default template is <code>&lt;a id='gh-' class='gh-search-item' href=''&gt;&lt;p&gt;&lt;h2&gt;&lt;/h2&gt;&lt;h4&gt;&lt;/h4&gt;&lt;/p&gt;&lt;/a&gt;</code></p> </blockquote> <p>:arrow_right: <strong>info_template</strong></p> <blockquote> <p>A Handlebars template used to display the number of search items returned.</p> <p>Default template is <code>&lt;p&gt;Number of posts found: &lt;/p&gt;</code></p> </blockquote> <p>:arrow_right: <strong>displaySearchInfo</strong></p> <blockquote> <p>When set <code class="language-plaintext highlighter-rouge">true</code>, the number of search items returned is shown immediately above the list of search hits. The notice is formatted using <code class="language-plaintext highlighter-rouge">info_template</code>.</p> <p>Default value is <code class="language-plaintext highlighter-rouge">true</code>.</p> </blockquote> <p>:arrow_right: <strong>zeroResultsInfo</strong></p> <blockquote> <p>When set <code class="language-plaintext highlighter-rouge">true</code>, the number-of-search-items notice formatted using <code class="language-plaintext highlighter-rouge">info_template</code> is shown even when the number of items is zero. When set to <code>false</code>, the notice is suppressed when there are no search results.</p> <p>Default value is <code class="language-plaintext highlighter-rouge">true</code>.</p> </blockquote> <p>:arrow_right: <strong>subpath</strong></p> <blockquote> <p>If Ghost is hosted in a subfolder of the site, set this string to the path leading to Ghost (for example, <code class="language-plaintext highlighter-rouge">"/blog"</code>). The value is prepended to item slugs in search returns.</p> <p>Default value is an empty string.</p> </blockquote> <p>:arrow_right: <strong>onPageLoad</strong></p> <blockquote> <p>When set <code class="language-plaintext highlighter-rouge">true</code>, posts are checked and indexed when a page is loaded. Early versions of ghostHunter default behavior was to initiate indexing when focus fell in the search field, to reduce the time required for initial page loads. With caching and other changes, this is no longer needed, and this option can safely be set to <code class="language-plaintext highlighter-rouge">true</code> always.</p> <p>Default value is <code class="language-plaintext highlighter-rouge">true</code>.</p> </blockquote> <p>:arrow_right: <strong>before</strong></p> <blockquote> <p>Use to optionally set a callback function that is executed immediately before the list of search results is displayed. The callback function takes no arguments.</p> <p>Example:</p> </blockquote> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">#search-field</span><span class="dl">"</span><span class="p">).</span><span class="nx">ghostHunter</span><span class="p">({</span>
    <span class="na">results</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#results</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">before</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">results are about to be rendered</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>

</code></pre></div></div> <blockquote> <p>Default value is <code class="language-plaintext highlighter-rouge">false</code>.</p> </blockquote> <p>:arrow_right: <strong>onComplete</strong></p> <blockquote> <p>Use to optionally set a callback function that is executed immediately after the list of search results is displayed. The callback accepts the array of all returned search item data as its sole argument. A function like that shown in the following example could be used with search-as-you-type to hide and reveal a search area and the current page content, depending on whether the search box contains any text.</p> </blockquote> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">#search-field</span><span class="dl">"</span><span class="p">).</span><span class="nx">ghostHunter</span><span class="p">({</span>
    <span class="na">results</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#results</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">onComplete</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.search-field</span><span class="dl">'</span><span class="p">).</span><span class="nx">prop</span><span class="p">(</span><span class="dl">'</span><span class="s1">value</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.my-search-area</span><span class="dl">'</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
            <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.my-display-area</span><span class="dl">'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.my-search-area</span><span class="dl">'</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
            <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.my-display-area</span><span class="dl">'</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div> <blockquote> <p>Default value is <code class="language-plaintext highlighter-rouge">false</code>.</p> </blockquote> <p>:arrow_right: <strong>item_preprocessor</strong></p> <blockquote> <p>Use to optionally set a callback function that is executed immediately before items are indexed. The callback accepts the <code class="language-plaintext highlighter-rouge">post</code> (or <code class="language-plaintext highlighter-rouge">page</code>) data for one item as its sole argument. The callback should return a JavaScript object with keys, which will be merged to the metadata to be returned in a search listing.</p> <p>Example:</p> </blockquote> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">item_preprocessor</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="kd">var</span> <span class="nx">thisDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">updated_at</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">aWeekAgo</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">thisDate</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1000</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">7</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">thisDate</span> <span class="o">&gt;</span> <span class="nx">aWeekAgo</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">recent</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">recent</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <blockquote> <p>With the sample function above, <code class="language-plaintext highlighter-rouge">result_template</code> could be set to something like this:</p> </blockquote> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">result_template</span><span class="p">:</span> <span class="dl">'</span><span class="s1">&lt;p&gt;NEW! &lt;/p&gt;</span><span class="dl">'</span>
</code></pre></div></div> <blockquote> <p>Default value is <code class="language-plaintext highlighter-rouge">false</code>.</p> </blockquote> <p>:arrow_right: <strong>indexing_start</strong></p> <blockquote> <p>Use to optionally set a callback that is executed immediately before an indexing operation begins. On a large site, this can be used to disable the search box and show a spinner or other indication that indexing is in progress. (On small sites, the time required for indexing will be so small that such flourishes would not be notice.)</p> </blockquote> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">indexing_start</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.search-field</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="dl">'</span><span class="s1">disabled</span><span class="dl">'</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">yellow-bg</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="dl">'</span><span class="s1">placeholder</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Indexing, please wait</span><span class="dl">'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <blockquote> <p>Default value is <code class="language-plaintext highlighter-rouge">false</code>.</p> </blockquote> <p>:arrow_right: <strong>indexing_end</strong></p> <blockquote> <p>Use to optionally set a callback that is executed after an indexing operation completes. This is a companion to <code class="language-plaintext highlighter-rouge">indexing_start</code> above.</p> </blockquote> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">indexing_end</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.search-field</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="dl">'</span><span class="s1">placeholder</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Search …</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">yellow-bg</span><span class="dl">'</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">prop</span><span class="p">(</span><span class="dl">'</span><span class="s1">disabled</span><span class="dl">'</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> <blockquote> <p>Default value is <code class="language-plaintext highlighter-rouge">false</code>.</p> </blockquote> <p>:arrow_right: <strong>includebodysearch</strong></p> <blockquote> <p>Use to allow searching within the full post body.</p> </blockquote> <blockquote> <p>Default value is <code class="language-plaintext highlighter-rouge">false</code>.</p> </blockquote> <h3 id="multiple-search-fields">Multiple search fields</h3> <p>There should be only one <code class="language-plaintext highlighter-rouge">ghostHunter</code> object in a page; if there are two, both will attempt to instantiate at the same time, and bad things will happen. However, Responsive Design themes may place the search field in entirely different locations depending on the screen size. You can use a single <code class="language-plaintext highlighter-rouge">ghostHunter</code> object to serve multiple search fields with a coding pattern like the following: <a name="r5" href="#f5">[5]</a></p> <ol> <li>Include a single hidden search field in your templates. This will be the <code class="language-plaintext highlighter-rouge">ghostHunter</code> object.</li> </ol> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"search"</span> <span class="na">class=</span><span class="s">"search-field"</span> <span class="na">hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span>
</code></pre></div></div> <ol> <li>Include your search fields where you like, but assign each a unique class name that is not shared with the hidden <code class="language-plaintext highlighter-rouge">ghostHunter</code> input node.</li> </ol> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">role=</span><span class="s">"search"</span> <span class="na">method=</span><span class="s">"get"</span> <span class="na">class=</span><span class="s">"search-form"</span> <span class="na">action=</span><span class="s">"#"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"screen-reader-text"</span><span class="nt">&gt;</span>Search for:<span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"search"</span> <span class="na">class=</span><span class="s">"search-field-desktop"</span> <span class="na">placeholder=</span><span class="s">"Search …"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"search-submit"</span> <span class="na">value=</span><span class="s">"Search"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div></div> <ol> <li>In the JavaScript of your theme, instantiate ghostHunter on the hidden node:</li> </ol> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$('.search-field').ghostHunter({
    results: '#results',
    onKeyUp: true
}):
</code></pre></div></div> <ol> <li>Register an event on the others that spoofs the steps needed to submit the query to <code class="language-plaintext highlighter-rouge">ghostHunter</code>:</li> </ol> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$('.search-field-mobile, .search-field-desktop').on('keyup', function(event) {
    $('.search-field').prop('value', event.target.value);
    $('.search-field').trigger('keyup');
});
</code></pre></div></div> <h3 id="clearing-search-results">Clearing search results</h3> <p>You can use the ghostHunter object to programmatically clear the results of your query. ghostHunter will return an object relating to your search field and you can use that object to clear results.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">searchField</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">#search-field</span><span class="dl">"</span><span class="p">).</span><span class="nx">ghostHunter</span><span class="p">({</span>
    <span class="na">results</span><span class="p">:</span> <span class="dl">"</span><span class="s2">#results</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">onKeyUp</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
</code></pre></div></div> <p>Now that the object is available to your code you can call it any time to clear your results:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">searchField</span><span class="p">.</span><span class="nx">clear</span><span class="p">();</span>
</code></pre></div></div> <h3 id="indexing-and-caching-how-it-works">Indexing and caching: how it works</h3> <p>After the load of any page in which ghostHunter is included, GH builds a full-text index of all posts. Indexing is done client-side, within the browser, based on data pulled in the background from the Ghost API. To reduce network traffic and processing burden, index data is cached to the extent possible in the browser’s <code class="language-plaintext highlighter-rouge">localStorage</code> object, according to the following rules:</p> <ol> <li> <p>If no cached data is available, GH retrieves data for all posts from the Ghost API, builds an index, and stores a copy of the index data in <code class="language-plaintext highlighter-rouge">localStorage</code> for future reference, along with a copy of the associated metadata and a date stamp reflecting the most recent update to the posts.</p> </li> <li> <p>If cached data is available, GH hits the Ghost API to retrieve a count of posts updated after the cached timestamp.</p> <ul> <li> <p>If any new posts or edits are found, GH generates an index and caches data as at (1).</p> </li> <li> <p>If no new posts or edits are found, GH restores the index, metadata and timestamp from <code class="language-plaintext highlighter-rouge">localStorage</code>.</p> </li> </ul> </li> </ol> <p>The index can be used in JavaScript to perform searches, and returns data objects that can be used to drive Handlebars templates.</p> <h3 id="development-rebuilding-ghosthunter">Development: rebuilding ghostHunter</h3> <p>The <code class="language-plaintext highlighter-rouge">jquery.ghosthunter.js</code> file is automatically generated, and (tempting though that may be) you should not edit it directly. If you plan to modify ghostHunter (in order to to tweak search behavior, say, or to extend GhostHunter’s capabilities) you should make your changes to the original source file, and rebuild ghostHunter using <code class="language-plaintext highlighter-rouge">Grunt</code>. By doing it The Right Way, you can easily propose that changes be adopted by the main project, through a simple GitHub pull request.</p> <p>To set things up for development work, start by entering the <code class="language-plaintext highlighter-rouge">ghostHunter</code> directory:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>prompt&gt; <span class="nb">cd </span>ghostHunter
</code></pre></div></div> <p>Install the Grunt command line tool globally (the command below is appropriate for Linux systems, your mileage may vary):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>prompt&gt; <span class="nb">sudo </span>npm <span class="nb">install</span> <span class="nt">-g</span> grunt-cl
</code></pre></div></div> <p>Install Grunt and the other node.js modules needed for the build:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>prompt&gt; npm <span class="nb">install</span>
</code></pre></div></div> <p>Try rebuilding ghostHunter:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>prompt&gt; grunt
</code></pre></div></div> <p>Once you are able to rebuild ghostHunter, you can edit the source file at <code class="language-plaintext highlighter-rouge">src/ghosthunter.js</code> with your favorite editor, and push your changes to the files in <code class="language-plaintext highlighter-rouge">dist</code> anytime by issuing the <code class="language-plaintext highlighter-rouge">grunt</code> command.</p> <h2 id="version-050-notes">Version 0.5.0 notes</h2> <ul> <li>Graceful Levenshtein updating of search list</li> <li>Search queries as fuzzy match to each term, joined by AND</li> </ul> <h2 id="version-041-notes">Version 0.4.1 notes</h2> <ul> <li>Incude lunr as a submodule, update to lunr.js v2.1</li> <li>Set up Grunt to produce use-require and embedded versions of plugin from a single source file</li> <li>Cache index, metadata, and timestamp in localStorage</li> <li>Include tags list in search-list metadata</li> <li>Add options: <ul> <li><code class="language-plaintext highlighter-rouge">subpath</code> string for subfolder deployments</li> <li><code class="language-plaintext highlighter-rouge">item_preprocessor</code> callback</li> <li><code class="language-plaintext highlighter-rouge">indexing_start</code> callback</li> <li><code class="language-plaintext highlighter-rouge">indexing_end</code> callback</li> </ul> </li> <li>Edits to README</li> </ul> <h2 id="version-040-notes">Version 0.4.0 notes</h2> <ul> <li>Compatible with Ghost 1.0</li> <li>Uses the Ghost API. If you need the RSS version you can use <a href="https://github.com/jamalneufeld/ghostHunter/commit/2e721620868d127e9e688145fabcf5f86249d11b">this</a> commit, or @lizhuoli1126’s <a href="https://github.com/dreampiggy/ghostHunter">fork</a>*</li> <li>It is currently not possible to <a href="https://github.com/TryGhost/Ghost/issues/5615">limit the number of fields queried and include tags</a> in a single Ghost API call.</li> </ul> <hr /> <h1 id="footnotes">Footnotes</h1> <p><a name="f1" href="#r1">[1]</a> The ghostHunter module, and any other JavaScript, CSS or icon code should always be placed under the <code class="language-plaintext highlighter-rouge">assets</code> directory. For more information, see the explanation of the <a href="https://themes.ghost.org/v1.17.0/docs/asset">asset helper</a>.</p> <p><a name="f2" href="#r2">[2]</a> In this case, the cloned <code class="language-plaintext highlighter-rouge">git</code> repository can be updated by entering the <code class="language-plaintext highlighter-rouge">ghostHunter</code> directory and doing <code class="language-plaintext highlighter-rouge">git pull</code>. There are a couple of alternatives:</p> <ul> <li>You can just download the ZIP archive and unpack it in <code class="language-plaintext highlighter-rouge">assets</code>. To update to a later version, download and unZIP again.</li> <li>If your theme itself is in a <code class="language-plaintext highlighter-rouge">git</code> repository, you can add ghostHunter as a <a href="https://github.com/blog/2104-working-with-submodules">git submodule</a> or a <a href="https://www.atlassian.com/blog/git/alternatives-to-git-submodule-git-subtree">git subtree</a>. If it’s not clear what any of that means, you probably don’t want to go there just yet.</li> </ul> <p><a name="f3" href="#r3">[3]</a> There is another copy of the module in <code class="language-plaintext highlighter-rouge">dist</code> called <code class="language-plaintext highlighter-rouge">jquery.ghosthunter.use-require.js</code>. That version of the module is meant for projects that make use of the <code class="language-plaintext highlighter-rouge">CommonJS</code> loading mechanism. If you are not using <code class="language-plaintext highlighter-rouge">CommonJS</code>, you can ignore this version of the module.</p> <p><a name="f4" href="#r4">[4]</a> Features requiring deeper control would include fuzzy searches by <a href="https://en.wikipedia.org/wiki/Levenshtein_distance">Levenstein distance</a>, or support for <a href="https://lunrjs.com/guides/language_support.html">non-English languages</a> in <code class="language-plaintext highlighter-rouge">lunr.js</code>, for example.</p> <p><a name="f5" href="#r5">[5]</a> The example given in the text assumes search-as-you-type mode. If your theme uses a submit button, the object at step 1 should be a hidden form, with appropriate adjustments to the JavaScript code to force submit rather than <code class="language-plaintext highlighter-rouge">onKeyUp</code>.</p> </div> </div> </div> <div class="col-lg-12" id="newsletter_footer"><!-- Mailchimp Newletters --> <form action=""method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate> <div id="mc_embed_signup_scroll_footer"> <label for="mce-EMAIL_footer"> Signup for Weekly Email Newsletters :D</label> <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL_footer" placeholder="email address" required> <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups--> <div style="position: absolute; left: -5000px;" aria-hidden="true"> <input type="text" name="b_50bab1c85eae24ecfb0f68361_3a2dd721d0" tabindex="-1" value=""> </div><br /> <div class="clear"> <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe_footer" class="btn btn-lg btn-success"> </div> </div> </div><footer> <p> Powered by<a href="https://github.com/sujaykundu777/devlopr-jekyll"> devlopr jekyll</a>.Hosted at <a href="https://pages.github.com">Github</a>. Subscribe via <a href=" /feed.xml ">RSS</a> </p> </footer> <script> var options = { classname: 'my-class', id: 'my-id' }; var nanobar = new Nanobar( options ); nanobar.go( 30 ); nanobar.go( 76 ); nanobar.go(100); </script> <div hidden id="snipcart" data-api-key="Y2I1NTAyNWYtMTNkMy00ODg0LWE4NDItNTZhYzUxNzJkZTI5NjM3MDI4NTUzNzYyMjQ4NzU0"></div> <script src="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.js" defer></script> <script src="/assets/js/mode-switcher.js"></script> <script> if (window.netlifyIdentity) { window.netlifyIdentity.on("init", user => { if (!user) { window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; }); } }); } </script> </body> </html>
